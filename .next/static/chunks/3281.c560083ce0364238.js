"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3281],{53281:(e,t,s)=>{s.r(t),s.d(t,{default:()=>S});var a=s(95155),r=s(12115),i=s(5565),n=s(76046),l=s(71230),o=s(15411),d=s(14586),u=s(53768),c=s(65564),f=s(31027),p=s(21567);let h=(0,f.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),m=r.forwardRef((e,t)=>{let{className:s,variant:r,...i}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,p.cn)(h({variant:r}),s),...i})});m.displayName="Alert",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h5",{ref:t,className:(0,p.cn)("mb-1 font-medium leading-none tracking-tight",s),...r})}).displayName="AlertTitle";let v=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,p.cn)("text-sm [&_p]:leading-relaxed",s),...r})});v.displayName="AlertDescription";let S=()=>{let e=(0,n.useRouter)(),{session:t}=(0,u.A)(),{toast:s}=(0,c.dj)(),[f,p]=(0,r.useState)(null),[h,S]=(0,r.useState)("");return((0,r.useEffect)(()=>{S(window.location.origin),t&&e.push("/dashboard");let{data:{subscription:a}}=d.N.auth.onAuthStateChange(async(t,a)=>{var r;if("SIGNED_IN"===t&&(null==a?void 0:null===(r=a.user)||void 0===r?void 0:r.id)){let{data:t,error:r}=await d.N.from("monite_entities").select("*").eq("user_id",a.user.id).single();r||!t?(s({title:"Welcome!",description:"Please complete your business setup."}),e.push("/onboarding")):(s({title:"Welcome back!",description:"You have successfully signed in."}),e.push("/dashboard"))}else"SIGNED_OUT"===t?p(null):"USER_UPDATED"!==t||a||p("Authentication failed. Please try again.")});return()=>{a.unsubscribe()}},[t,e,s]),h)?(0,a.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white px-4",children:(0,a.jsxs)("div",{className:"w-full max-w-md space-y-8",children:[(0,a.jsxs)("div",{className:"text-center space-y-6",children:[(0,a.jsx)("h1",{className:"text-5xl font-bold text-[#1A1F2C]",style:{fontFamily:"Times New Roman, serif"},children:"WonderPay"}),(0,a.jsx)("div",{className:"w-20 h-20 mx-auto transform hover:scale-105 transition-transform duration-300",children:(0,a.jsx)(i.default,{src:"/lovable-uploads/2cfe764c-e03d-4bd4-9aec-40a3f9d1a7ae.png",alt:"WonderPay Logo",width:80,height:80,className:"w-full h-full object-contain"})})]}),f&&(0,a.jsx)(m,{variant:"destructive",className:"mb-4",children:(0,a.jsx)(v,{children:f})}),(0,a.jsx)(l.Nj,{supabaseClient:d.N,appearance:{theme:o.Hv,variables:{default:{colors:{brand:"#1A1F2C",brandAccent:"#403E43"}}},className:{container:"w-full",button:"w-full px-4 py-2 rounded-full",input:"rounded-lg bg-white/50 backdrop-blur-sm"}},providers:[],redirectTo:"".concat(h,"/dashboard"),showLinks:!0,magicLink:!1,view:"sign_in",localization:{variables:{sign_in:{email_label:"Email",password_label:"Password"},sign_up:{email_label:"Email",password_label:"Password"}}}}),(0,a.jsx)("div",{className:"flex items-center justify-center space-x-2",children:(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Powered by Wonderland Studio"})})]})}):null}},65564:(e,t,s)=>{s.d(t,{dj:()=>p,oR:()=>f});var a=s(12115);let r={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"},i=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:r.REMOVE_TOAST,toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case r.ADD_TOAST:return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case r.UPDATE_TOAST:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case r.DISMISS_TOAST:{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case r.REMOVE_TOAST:if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};default:return e}},d=[],u={toasts:[]};function c(e){u=o(u,e),d.forEach(e=>{e(u)})}function f(e){let{...t}=e,s=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:r.DISMISS_TOAST,toastId:s});return c({type:r.ADD_TOAST,toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:r.UPDATE_TOAST,toast:{...e,id:s}})}}function p(){let[e,t]=a.useState(u);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:f,dismiss:e=>c({type:r.DISMISS_TOAST,toastId:e})}}},14586:(e,t,s)=>{s.d(t,{N:()=>a});let a=(0,s(35974).UU)("https://zwtxebgyiknysfmpeejy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp3dHhlYmd5aWtueXNmbXBlZWp5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MDI0ODg5MzAsImV4cCI6MjAxODA2NDkzMH0.SbUXk6kbZzn9kY1VVZ3CZXw_cYGiknf2fGV4TBvdG0Q",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}})},21567:(e,t,s)=>{s.d(t,{cn:()=>i});var a=s(43463),r=s(69795);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},53768:(e,t,s)=>{s.d(t,{AuthProvider:()=>d,A:()=>l});var a=s(95155),r=s(12115),i=s(14586);let n=(0,r.createContext)(void 0);function l(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}let o=(0,r.createContext)(void 0);function d(e){let{children:t}=e,[s,n]=(0,r.useState)(null),[l,d]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{i.N.auth.getSession().then(e=>{let{data:{session:t}}=e;n(t),d(!1)});let{data:{subscription:e}}=i.N.auth.onAuthStateChange((e,t)=>{n(t),d(!1)});return()=>e.unsubscribe()},[]),(0,a.jsx)(o.Provider,{value:{session:s,isLoading:l},children:t})}}}]);